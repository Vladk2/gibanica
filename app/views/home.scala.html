@(title: String)(content: Html)

<!DOCTYPE html>
<html lang="en">
    <head>
        @* Here's where we render the page title `String`. *@
        <title>@title</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel='stylesheet' type='text/css'>
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
        <script type="text/javascript" src="@routes.Application.jsRoutes()"></script>

        <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
        <link rel="stylesheet" href="@routes.Assets.at("stylesheets/demo.css")">
        <link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme2.css")">

        <script src="@routes.Assets.at("javascripts/caleandar.js")"></script>

        <style>
        .form-control {
            width: 70%;
            text-align: center
        }

        .form-control:focus {
            border-color: orange;
            -webkit-box-shadow: none;
            box-shadow: none;
        }

        .modal-content {
            background-color: #fff1cc
        }

        .formText {
            color: white
        }

        * {
            margin: 0;
            padding: 0;
        }

        .rate {
            float: left;
            height: 46px;
            padding: 0 10px;
        }

        .rate:not(:checked) > input {
            position: absolute;
            top: -9999px;
        }

        .rate:not(:checked) > label {
            float: right;
            width: 1em;
            overflow: hidden;
            white-space: nowrap;
            cursor: pointer;
            font-size: 30px;
            color: #ccc;
        }

        .rate:not(:checked) > label:before {
            content: '★ ';
        }

        .rate > input:checked ~ label {
            color: #ffc700;
        }

        .rate:not(:checked) > label:hover,
        .rate:not(:checked) > label:hover ~ label {
            color: #deb217;
        }

        .rate > input:checked + label:hover,
        .rate > input:checked + label:hover ~ label,
        .rate > input:checked ~ label:hover,
        .rate > input:checked ~ label:hover ~ label,
        .rate > label:hover ~ input:checked ~ label {
            color: #c59b08;
        }

        .modal_rate {
            float: inherit;
            height: 46px;
            padding: 0 10px;
        }

        .modal_rate:not(:checked) > input {
            position: absolute;
            top: -9999px;
        }

        .modal_rate:not(:checked) > label {
            float: inherit;
            width: 1em;
            overflow: hidden;
            white-space: nowrap;
            cursor: pointer;
            font-size: 30px;
            color: #ccc;
        }



        .modal_rate:not(:checked) > label:before {
            content: '★ ';
        }

        .modal_rate > input:checked ~ label {
            color: #ffc700;
        }

        .modal_rate:not(:checked) > label:hover,
        .modal_rate:not(:checked) > label:hover ~ label {
            color: #deb217;
        }

        .modal_rate > input:checked + label:hover,
        .modal_rate > input:checked + label:hover ~ label,
        .modal_rate > input:checked ~ label:hover,
        .modal_rate > input:checked ~ label:hover ~ label,
        .modal_rate > label:hover ~ input:checked ~ label {
            color: #c59b08;
        }


        td.restNameVisits:hover {
            background-color: #e56e42;
        }

        tr.orderFood:hover {
            background-color: #e56e42;
        }

        #seatConfTitle:hover {
            color: #e56e42;
        }

        #menuTitle:hover {
            color: #e56e42;
        }
        #managementTitle:hover {
            color: #e56e42;
        }
        #reportTitle:hover {
            color: #e56e42;
        }


        .nav-tabs > li > a{
            border: medium none;
            color: black;
        }

        .nav-tabs > li > a:hover{
            background-color: #f0ad4e !important;
            border: medium none;
            border-radius: 0;
            color:#fff;
        }
        .nav-tabs > li.active > a,
        .nav-tabs > li.active > a:hover,
        .nav-tabs > li.active > a:focus{
            color: black;
            background-color: #f0ad4e;
        }

        .icon {
            width:30px;
            height:30px;
            position: relative;
        }
        .notifyNoBlock{
            background:white;
            color: orangered;
            font-size: medium;
            position: absolute;
            top: 5px;
            right: 5px;
        }


        .searchInput::-webkit-input-placeholder { color: darkorange; }

        .axis path,
        .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }

        .bar {
            fill: darkorange;
        }

        .bar:hover {
            fill: black ;
        }

        .x.axis path {
            display: none;
        }

        .d3-tip {
            line-height: 1;
            font-weight: bold;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            border-radius: 2px;
        }

        /* Creates a small triangle extender for the tooltip */
        .d3-tip:after {
            box-sizing: border-box;
            display: inline;
            font-size: 10px;
            width: 100%;
            line-height: 1;
            color: rgba(0, 0, 0, 0.8);
            content: "\25BC";
            position: absolute;
            text-align: center;
        }

        /* Style northward tooltips differently */
        .d3-tip.n:after {
            margin: -1px 0 0 0;
            top: 100%;
            left: 0;
        }



        </style>

    </head>


    <body style="background-color: #fff1cc">


            <!--  Top Menu Bar -->
        <nav class="navbar navbar-inverse" >
            <div class="container" >

                    <!--  logo  -->
                <div class="navbar-header" >
                    <button type="button" class ="navbar-toggle"
                    data-toggle="collapse" data-target="#mainNavBar">
                        <span class="icon-bar">  </span>
                        <span class="icon-bar">  </span>
                        <span class="icon-bar">  </span>
                    </button>

                    <a href="#" title="Gibanica home" class="navbar-brand" style="color: #f47441;
                        font-size: 200%;
                        font-family: Verdana"> <b><i>gibanica.com</i></b> </a>

                </div>

                    <!--  Menu items -->
                <div class="collapse navbar-collapse" id=mainNavBar >
                    <ul class="nav navbar-nav navbar-right" >
                        <li id="profile"> <a href="/profile"><b style="font-size: 130%;
                            color: #f47441" id="profButton"> Profile </b></a>   </li>
                        @if(session.get("userType").equals("guest")) {

                            <li id="restaurants"> <a href="/restaurants" ><b style="font-size: 130%;
                            color: #f47441" id="restButton"> Restaurants </b></a></li>
                            <li id="visits"> <a href="/visits" ><b style="font-size: 130%;
                                color: #f47441" id="visitsButton"> Visits </b></a></li>
                            <li id="friends" > <a href="/friends" ><b style="font-size: 130%;
                                color: #f47441" id="friendsButton"> Friends </b></a></li>
                        }
                        @if(session.get("userType").equals("bidder")) {
                            <li id="requests"> <a href="/requests" ><b style="font-size: 130%;
                                color: #f47441" id="reqButton"> Requests </b></a></li>
                            <li id="myOffers"> <a href="/myOffers" ><b style="font-size: 130%;
                                color: #f47441" id="myOffersButton"> My Offers </b></a></li>

                        }
                        @if(session.get("userType").equals("waiter")){
                            <li id="order"> <a href="/newOrder" ><b style="font-size: 130%;
                                color: #f47441" id="newOrderButton"> New Order </b></a></li>
                        }
                        @if(session.get("userType").equals("bartender") || session.get("userType").equals("chef") || session.get("userType").equals("waiter")) {
                            <li id="orders"> <a href="/orders" ><b style="font-size: 130%;
                                color: #f47441" id="ordersButton"> Orders </b></a></li>
                        }
                        @if(session.get("userType").equals("system-manager")) {
                            <li id="restaurants"> <a href="/restaurants" ><b style="font-size: 130%;
                                color: #f47441" id="restButton"> Settings </b></a></li>
                        }
                        @if(session.get("userType").equals("rest-manager")) {
                            <li id="restaurants"> <a href="/restaurants" ><b style="font-size: 130%;
                                color: #f47441" id="restButton"> My Restaurant </b></a></li>
                        }
                        @if(session.get("userType").equals("bidder") ||  session.get("userType").equals("chef") || session.get("userType").equals("waiter")
                            || session.get("userType").equals("bartender"))  {
                        <li class="icon dropdown" id="notificationIcon" style="margin-right: 15px;">
                            <a data-toggle="dropdown" href="#" style="color:#f47441;font-size:18pt;" class="dropdown-toggle glyphicon glyphicon-bell "></a>
                            <div style="min-width: 55%;border-radius:5px;text-align: center" class="notifyNoBlock"><b id="notifyNo"></b></div>

                            <div class="dropdown-menu" style="padding: 50%;
                                opacity: 0.9;
                                margin-top: 20px;
                                padding-bottom: 25px;
                                width: 200px;
                                background-color: black;
                                color: #f47441">
                                <div id="dropdown_notify">

                                </div>
                            @if(session.get("userType").equals("bidder"))  {
                             <a href="/bidderNotifications" style="color:white"><i>See all notifications</i></a>
                                }
                             @if(session.get("userType").equals("waiter") || session.get("userType").equals("chef")
                                        || session.get("userType").equals("bartender")) {
                                <a href="/ordersNotifications" style="color:white"><i>See all notifications</i></a>
                            }

                            </div>

                        </li>
                        }
                        <li class="divider" style="background-color: white"></li>
                        <li id="logout"> <a href="/logout"><b style="font-size: 130%;
                            color: #f47441"> Log out </b></a></li>

                    </ul>

                    @if(session.get("userType").equals("bidder")) {
                    <div class="col-sm-3 col-md-3 pull-right" style="margin-right:70px;visibility: hidden" id="searchDiv">

                        <div class="input-group" style="margin-top:10px">
                            <input type="text" class="form-control searchInput" id="toSearch" placeholder="Search by restaurant's name..." name="srch-term"  style="background-color:black;color:white;border-color:orange;min-width:120px; width:220px">
                            <div class="input-group-btn">
                                <button class="btn btn-warning" id="trazi" style="height:34px;"><i class="glyphicon glyphicon-search"></i></button>
                            </div>

                        </div>
                    </div>
                    }

                </div>



            </div>

        </nav>

        @if(session.get("userType").equals("bidder")) {

                   <script>

                    var ws;
                    var root;
                    var notifyNo = 1;


                    $(function() {


                        root = "ws:" + '//' + location.host + "/notifyManager";
                        ws = new WebSocket(root, "protocolTwo");

                        ws.onmessage = function (event) {


                                var notification = JSON.parse(event.data);
                            if(notification.signal != "hideReq") {
                                $("#dropdown_notify").append('<b>' + notification.message + '</b> <hr style="border-color:dimgrey">')
                                $("#notifyNo").text(notifyNo);


                                notifyNo++;
                            }
                            else {
                                if ($(".requestDiv")[0]) {  // if div exists (if requests page is opened)
                                    $("#divId\\:" + notification.aboutReq).hide(300);
                                }
                                if($(".myOfferDiv")[0]){   // if div exists (if myoffers page is opened)
                                    $(".offerFor\\:" + notification.aboutReq).hide(300);
                                }
                            }

                        };

                        ws.onopen = function (event) {
                            var connection_string = {
                                "type": "bidderConnection",
                                "userId" : "@session.get("userId")",
                                "userMail": "@session.get("connected")"
                            };
                            ws.send(JSON.stringify(connection_string));
                        };

                    });

                    $("#notificationIcon").click(function () {


                        var this_user = { "userId" :  "@session.get("userId")"
                        };
                        myJsRoutes.controllers.Bids.seenNotifications().ajax({
                            data: JSON.stringify(this_user),
                            contentType: 'application/json',
                            success: function () {
                                $("#notifyNo").text("");
                            },
                            error: function () {

                            }



                        });


                    });

        </script>
        }

        @if(session.get("userType").equals("waiter") || session.get("userType").equals("chef")
                    || session.get("userType").equals("bartender")) {
            <script>

                    /*var ws;
                    var root;
                    var notifyNo = 1;


                    $(function () {


                        // change color of the 'requests' option in the navbar


                        root = "ws:" + '//' + location.host + "/proceed_with_order";

                        ws = new WebSocket(root, "protocolOne");

                        ws.onmessage = function (event) {

                            //var notification = JSON.parse(event.data);
                            //$("#dropdown_notify").append('<b>' + notification.message + '</b> <hr style="border-color:dimgrey">');
                            //$("#notifyNo").text(notifyNo);
                            console.log(event);
                            notifyNo++;

                        };

                        ws.onopen = function (event) {
                            var connection_string = {
                                "type": "connection",
                                "userId": "@session.get("userId")",
                                "userMail": "@session.get("connected")"
                            };
                            ws.send(JSON.stringify(connection_string));
                        };

                    });

                    $("#notificationIcon").click(function () {
                        var this_user = {
                            "userId": "@session.get("userId")"
                        };
                        $.ajax({
                            type: "POST",
                            url: "/seenOrderNotification",
                            data: JSON.stringify(this_user),
                            contentType: 'application/json',
                            success: function () {
                                $("#notifyNo").text("");
                            },
                            error: function () {

                            }
                        });
                    });*/
                var notifyNo = 1;

                $(function (){

                    var root = "ws:" + '//' + location.host + "/proceed_with_order";

                    var webSocket = new WebSocket(root, "protocolOne");

                    webSocket.onmessage = function (event) {
                        console.log(event.data);
                        //var notification = JSON.parse(event.data);
                        $("#dropdown_notify").append('<b>' + event.data + '</b> <hr style="border-color:dimgrey">');
                        $("#notifyNo").text(notifyNo);

                        notifyNo++;
                    };

                    webSocket.onopen = function (event) {
                        var connection_string = {
                            "type": "connection",
                            "userId": "@session.get("userId")",
                            "userMail": "@session.get("connected")"
                        };
                        webSocket.send(JSON.stringify(connection_string));
                    };

                    $("#notificationIcon").click(function () {
                        var this_user = {
                            "userId": "@session.get("userId")"
                        };
                        $.ajax({
                            type: "POST",
                            url: "/seenOrderNotification",
                            data: JSON.stringify(this_user),
                            contentType: 'application/json',
                            success: function () {
                                $("#notifyNo").text("");
                            },
                            error: function () {

                            }
                        });
                    });

                });

            </script>
        }

            @if(session.get("userType").equals("rest-manager")) {
             <script>
                    var ws;
                    var root;
                    $(function() {

                        root = "ws:" + '//' + location.host + "/notifyManager";
                        ws = new WebSocket(root, "protocolTwo");

                        ws.onmessage = function (event) {


                                var offerId = event.data;
                                if($("#offerDiv\\:" + offerId).length != 0) // if id exists
                                {
                                    $(".btn\\:" + offerId).hide(100);
                                    $("#AcceptOfferMessage"+offerId).html("<div class='alert alert-warning'  >" +
                                            " <a href='#' class='close' data-dismiss='alert' aria-label='close'>&times; </a> <b> Bidder has changed his offer! </b> You must <a href='/offers'>refresh </a> your page in order to accept this offer. </div>");
                                    $("#AcceptOfferMessage"+offerId).show();
                                }


                        };


                        ws.onopen = function (event) {
                            var connection_string = {
                                "type": "restmanConnection",
                                "userId" : "@session.get("userId")",
                                "userMail": "@session.get("connected")"
                            };

                            ws.send(JSON.stringify(connection_string));
                        };

                    });
         </script>
            }



        @content

    </body>
</html>